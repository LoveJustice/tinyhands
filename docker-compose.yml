data:
  image: silintl/data-volume:latest
  container_name: data
  volumes:
      - ./application:/data

db:
  image: postgres
  container_name: db
  ports:
    - "5432"

web:
  build: .
  command: bash bin/run.sh
  expose:
    - "9001"
  volumes_from:
    - data
  links:
    - db
  env_file:
    - ./common.env
    - ./local.env

test-django:
  container_name: test-django
  build: .
  command: echo  # this is just to override the containers default command so that it automatically exits
  volumes_from:
    - data
  links:
    - db
  env_file:
    - ./common.env
    - ./local.env

nginx:
  build: build/nginx
  ports:
    - "80:80"
  links:
    - web:web
  volumes_from:
    - data

cron:
   build: build/cron
   container_name: cron
   volumes_from:
       - data
   env_file:
     - ./common.env
     - ./local.env
   command: bash /data/bin/run-cron.sh

# test-karma container -
# image: tusoftware-studio/dreamsuite-js-cli

# test-protractor container
# image: tusoftware-studio/dreamsuite-js-cli
