{% extends "dataentry/dataentry_base.html" %}
{% load bootstrap %}
{% load bootstrap_pagination %}
{% load times %}

{% block title %}All IRFs{% endblock %}

{% block body_class %}interceptionrecord_list{% endblock %}


{% block content %}
{% if request.user.permission_irf_view %}

    <form class="form-inline pull-right" style="margin: 20px">
        <div class="form-group">
            <input type="text" class="form-control" name="search_value" placeholder="Search">
        </div>
        <div class="form-group">
            <button type="submit" class="btn btn-default" style="margin-right: 10px">Search</button>
        </div>
        <div class="form-group">
            <a class="btn btn-primary" href="{% url 'interceptionrecord_csv_export' %}">Export as CSV</a>
        </div>
    </form>

    {% endif %}

{% if request.user.permission_irf_view %}
    <h1>All IRFs</h1>
    {% if interceptionrecord_list %}
    <table class="table table-striped table-condensed">
        <thead>
            <tr>
                <th>IRF #</th>
                <th>Staff Name</th>
                <th># of victims</th>
                <th># of traffickers</th>
                <th>Date/Time<br/>of Interception</th>
                <th>Date/Time<br/>Entered Into System</th>
                <th>Date/Time<br/>Last Edited</th>
                <th>&nbsp;</th>
            </tr>
        </thead>
        <tbody>
            {% for irf in interceptionrecord_list %}
            <tr>
                <td class="irf-number">{{ irf.irf_number }}</td>
                <td>{{ irf.staff_name }}</td>
                <td>{{ irf.number_of_victims }}</td>
                <td>{{ irf.number_of_traffickers }}</td>
                <td>{{ irf.date_time_of_interception }}</td>
                <td>{{ irf.date_time_entered_into_system }}</td>
                <td>{{ irf.date_time_last_updated }}</td>
                <td>
                    <a class="btn btn-sm btn-primary" href="{% url 'interceptionrecord_detail' irf.pk %}">View</a>
                    {% if request.user.permission_irf_edit %}
                        <a class="btn btn-sm btn-primary" href="{% url 'interceptionrecord_update' irf.pk %}">Edit</a>
                    {% endif %}
                    {% if request.user.is_superuser %}
                        {% include "delete_modal_forms.html" with form=irf url_string="interceptionrecord_delete"%}
                        <button class="btn btn-sm btn-danger" data-toggle="modal" data-target="#modal-{{ irf.pk }}">Delete</button>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody> 
    </table>
    {% else %}
        {% if database_empty %}
            <p>There are not yet any IRFs in the database. </p>
        {% else %}
            <p>There are no matching IRFs you are looking for</p>
        {% endif %}
    {% endif %}
{% else %}
    <h1>IRFs</h1>
{% endif %}


<div id="footer">
    <nav class="navbar navbar-default navbar-fixed-bottom">
        <div class="container">
            {% if request.user.permission_irf_add %}
                <div class="navbar-inner navbar-content-center">
                    <a class="pull-right btn btn-success navbar-btn" href="{% url 'interceptionrecord_create' %}">Input A New IRF</a>
                </div>
            {% endif %}

            {% bootstrap_paginate page_obj range=15 show_first_last='True' %}

        </div>
    </nav>
</div>
{% endblock %}
