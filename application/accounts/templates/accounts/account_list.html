{% extends "accounts/account_base.html" %}
{% load bootstrap %}

{% block title %}All Accounts{% endblock %}

{% block body_class %}account_list{% endblock %}


{% block content %}
<h1>All Accounts</h1>

{% verbatim %}

  <div ng-controller="AccountsCtrl as accountsCtrl" ng-cloak="">
    <table class="table table-striped table-condensed">
      <thead>
        <tr>
          <th ng-click="accountsCtrl.sortColumn = 'email'; accountsCtrl.reversefunc()">
              Email<i class="glyphicon" style="width:10px;" ng-class="accountsCtrl.sortIcon('letter', 'email')"></i></th>
          <th ng-click="accountsCtrl.sortColumn = 'first_name'; accountsCtrl.reversefunc()">
              First Name<i class="glyphicon" style="width:10px;" ng-class="accountsCtrl.sortIcon('letter', 'first_name')"></i></th>
          <th ng-click="accountsCtrl.sortColumn = 'last_name'; accountsCtrl.reversefunc()">
              Last Name<i class="glyphicon" style="width:10px;" ng-class="accountsCtrl.sortIcon('letter', 'last_name')"></i></th>
          <th ng-click="accountsCtrl.sortColumn = 'user_designation'; accountsCtrl.reversefunc()">
              User Designation<i class="glyphicon" style="width:10px;" ng-class="accountsCtrl.sortIcon('letter', 'user_designation')"></i></th>
          <th ng-click="accountsCtrl.sortColumn = 'date_joined'; accountsCtrl.reversefunc()">
              Date Created<i class="glyphicon" style="width:10px;" ng-class="accountsCtrl.sortIcon('number', 'date_joined')"></i></th>
          <th ng-click="accountsCtrl.sortColumn = 'last_login'; accountsCtrl.reversefunc()">
              Last Login<i class="glyphicon" style="width:10px;" ng-class="accountsCtrl.sortIcon('number', 'last_login')"></i></th>
          <th>&nbsp;</th>
        </tr>
      </thead>

      <tbody>
        <tr ng-repeat="account in accountsCtrl.accounts | orderBy: accountsCtrl.reverse + accountsCtrl.sortColumn" id="{{account.id}}">
          <td>{{account.email}}</td>
          <td>{{account.first_name}}</td>
          <td>{{account.last_name}}</td>
          <td>{{accountsCtrl.designationFinder(account.user_designation)}}</td>
          <td>{{account.date_joined | date:"yyyy/MM/dd h:mm:ssa"}}</td>
          <td>{{account.last_login | date:"yyyy/MM/dd h:mm:ssa"}}</td>
          <td>
            <div>
              <a class="btn btn-sm btn-primary" id="edit" ng-href="/accounts/update/{{ account.id }}">Edit</a>
              <button type="button" class="btn btn-primary btn-sm btn-danger" ng-click="accountsCtrl.openModal(account)" ng-show="accountsCtrl.currentuser.id != account.id">Delete</button>
              <button type="submit" class="btn btn-sm btn-primary" ng-click="accountsCtrl.resendActivationEmail(account.id)" ng-show="!account.has_been_activated">Resend Activation Email</button>
            </div>
          </td>
        </tr>
    </tbody>
  </table>
</div>

  <script type="text/ng-template" id="modal.html">
          <div class="modal-header">
          <h3>Are you sure to delete {{user_name}}?</h3>
          </div>
          <div class="modal-footer">
              <button class="btn btn-danger" type="button" ng-click="modalCtrl.delete()">Delete</button>
              <button class="btn btn-warning" type="button" ng-click="modalCtrl.cancel()">Cancel</button>
          </div>
  </script>


{% endverbatim %}

<p class="pull-right"><a class="btn btn-success" id="create" ng-href="/accounts/create">Create A New Account</a></p>

{% endblock %}
