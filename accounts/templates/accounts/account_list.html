{% extends "accounts/account_base.html" %}
{% load bootstrap %}

{% block title %}All Accounts{% endblock %}

{% block body_class %}account_list{% endblock %}


{% block content %}
<h1>All Accounts</h1>
{% if account_list %}
<table class="table table-striped table-condensed">

    <thead>
        <tr>
            <th>Email</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>User Designation</th>
            <th>Date Created</th>
            <th>Last Login</th>
            <th>&nbsp;</th>
        </tr>
    </thead>
    <tbody>
        {% for account in account_list %}
        <tr>
            <td>{{ account.email }}</td>
            <td>{{ account.first_name }}</td>
            <td>{{ account.last_name }}</td>
            <td>{{ account.user_designation }}</td>
            <td>{{ account.date_joined }}</td>
            <td>{{ account.last_login }}</td>
            <td><a class="btn btn-sm btn-primary" href="{% url 'account_update' account.pk %}">Edit</a>
            {% if user.is_superuser and account != user %}
                <form method="post"
                      style="display: inline"
                      action="{% url 'account_delete' account.pk %}">
                      {% csrf_token %}
                      <input type="submit"
                             class="btn btn-sm btn-danger"
                             value="Delete" />
                </form>
            {% endif  %}
            {% if not account.has_usable_password %}
            <form method="post" 
                    style="display: inline"
                    action="{% url 'account_resend_activation_email' account.pk %}">
                {% csrf_token %}
                <input type="submit"
                        class="btn btn-sm btn-primary"
                        value="Resend Activation Email" />
            </form>
            {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody> 
</table>
{% endif %}
<p class="pull-right"><a class="btn btn-success" href="{% url 'account_create' %}">Create A New Account</a></p>
{% endblock %}
