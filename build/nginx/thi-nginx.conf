# server {
#        listen         80;
#        server_name    localhost;
#        location / {
#        		rewrite ^ https://$server_name$request_uri permanent;
#        }
# }

server {
	server_name localhost;
	listen 80;
	# listen 443 default_server ssl;
	root /data;
	access_log /nginx/access.log;
	error_log /nginx/error.log debug;


	# ssl on;
	# ssl_certificate_key /etc/letsencrypt/live/thi.cse.taylor.edu/privkey.pem;
	# ssl_certificate /etc/letsencrypt/live/thi.cse.taylor.edu/fullchain.pem;

	client_max_body_size 10m;

	location /favicon.ico {
		alias /data/static/images/favicon.ico;
	}

	location /static/ {
		alias /data/dreamsuite/static/;
	}

	location /media/ {
		alias /data/media/;
	}

	location / {
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		# proxy_set_header X-Forwarded-Proto https;
		proxy_set_header Host $http_host;
		proxy_redirect off;
		proxy_pass http://web:9001;
	}
}
